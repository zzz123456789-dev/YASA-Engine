name: PR Checks

on:
  pull_request:
    types: [opened, synchronize, reopened]  # PR åˆ›å»ºã€æ›´æ–°ï¼ˆpushï¼‰ã€é‡æ–°æ‰“å¼€ æ—¶è§¦å‘

env:
  NODE_VERSION: 18

jobs:
  # æ„å»ºæ£€æŸ¥
  build:
    name: Build Verification
    runs-on: ubuntu-latest

    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: ${{ env.NODE_VERSION }}
          cache: 'npm'

      - name: Install dependencies
        run: |
          echo "ğŸ“¦ Installing production dependencies..."
          npm ci
          npm install @ant-yasa/uast-parser-java-js@latest @ant-yasa/uast-spec@latest
          echo "ğŸ” Resolved UAST versions:"
          npm list @ant-yasa/uast-spec @ant-yasa/uast-parser-java-js
    
      # ğŸ‘‡ æ–°å¢ï¼šTypeScript ç±»å‹æ£€æŸ¥ï¼ˆä¸ç”Ÿæˆæ–‡ä»¶ï¼‰
      - name: ğŸ” Type Check with tsc --noEmit
        run: |
          echo "ğŸ§ª Running TypeScript type check (no emit)..."
          npx tsc --noEmit --pretty
          echo "âœ… TypeScript ç±»å‹æ£€æŸ¥é€šè¿‡ï¼Œæ— ç¼–è¯‘é”™è¯¯"